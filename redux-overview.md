---
title: 'ReduxåŸºç¡€æ•™ç¨‹,ç¬¬1éƒ¨åˆ† - redux æ¦‚è¿°'
date: '2022-01-19'
---

# ä»€ä¹ˆæ˜¯Redux

å®ƒæœ‰åŠ©äºé¦–å…ˆç†è§£è¿™ä¸ª"Redux"æ˜¯ä»€ä¹ˆ.å®ƒæœ‰ä»€ä¹ˆç”¨? å®ƒå¸®åŠ©æˆ‘ä»¬è§£å†³äº†å“ªäº›é—®é¢˜? æˆ‘ä»¬åˆä¸ºä»€ä¹ˆè¦ä½¿ç”¨å®ƒ?


*Redux æ˜¯ä¸€ç§æ¨¡å¼å’Œåº“,ç”¨äºç®¡ç†å’Œæ›´æ–°åº”ç”¨ç¨‹åºçŠ¶æ€,ä½¿ç”¨ç§°ä¸ºâ€œåŠ¨ä½œâ€çš„äº‹ä»¶.* å®ƒå……å½“éœ€è¦åœ¨æ•´ä¸ªåº”ç”¨ç¨‹åºä¸­ä½¿ç”¨è¿‡ç¨‹ä¸­çš„çŠ¶æ€é›†ä¸­å­˜å‚¨,å…¶è§„åˆ™ç¡®ä¿çŠ¶æ€åªèƒ½ä»¥å¯é¢„æµ‹çš„æ–¹å¼æ›´æ–°.

## ä¸ºä»€ä¹ˆè¦ä½¿ç”¨Redux

Redux å¸®åŠ©æ‚¨ç®¡ç†â€œå…¨å±€â€çŠ¶æ€â€”â€”â€”â€”åº”ç”¨ç¨‹åºçš„è®¸å¤šéƒ¨åˆ†éƒ½éœ€è¦çš„çŠ¶æ€.


*Redux æä¾›çš„æ¨¡å¼å’Œå·¥å…·ä½¿æ‚¨æ›´å®¹æ˜“ç†è§£ä½•æ—¶ã€ä½•åœ°ã€ä¸ºä»€ä¹ˆä»¥åŠå¦‚ä½•æ›´æ–°åº”ç”¨ç¨‹åºä¸­çš„çŠ¶æ€,ä»¥åŠå½“è¿™äº›æ›´æ”¹å‘ç”Ÿæ—¶æ‚¨çš„åº”ç”¨ç¨‹åºé€»è¾‘å°†å¦‚ä½•è¡¨ç°.* ReduxæŒ‡å¯¼æ‚¨ç¼–å†™å¯é¢„æµ‹å’Œå¯æµ‹è¯•çš„ä»£ç ,è€…æœ‰åŠ©äºè®©æ‚¨ç¡®ä¿¡æ‚¨çš„åº”ç”¨ç¨‹åºå°†æŒ‰é¢„æœŸå·¥ä½œ

## æˆ‘ä»€ä¹ˆæ—¶å€™åº”è¯¥ä½¿ç”¨Redux

Reduxå¯å¸®ç»„æ‚¨å¤„ç†å…±äº«çŠ¶æ€ç®¡ç†,ä½†ä¸ä»»ä½•å·¥å…·ä¸€æ ·,å®ƒä¹Ÿéœ€è¦æƒè¡¡å–èˆ.æœ‰æ›´å¤šçš„æ¦‚å¿µè¦å­¦ä¹ ,ä¹Ÿæœ‰æ›´å¤šçš„ä»£ç è¦ç¼–å†™.å®ƒè¿˜ä¸ºæ‚¨çš„ä»£ç æ·»åŠ äº†ä¸€äº›é—´æ¥æ€§,å¹¶è¦æ±‚æ‚¨éµå¾ªæŸäº›é™åˆ¶.è¿™æ˜¯çŸ­æœŸå’Œé•¿æœŸç”Ÿäº§åŠ›ä¹‹é—´çš„æƒè¡¡.

Reduxåœ¨ä»¥ä¸‹æƒ…å†µä¸‹æ›´æœ‰ç”¨:

* æ‚¨åœ¨åº”ç”¨ç¨‹åºçš„è®¸å¤šåœ°æ–¹éƒ½éœ€è¦å¤§é‡çš„åº”ç”¨ç¨‹åºçŠ¶æ€
* åº”ç”¨ç¨‹åºçŠ¶æ€ä¼šéšç€æ—¶é—´çš„æ¨ç§»è€Œé¢‘ç¹æ›´æ–°
* æ›´æ–°æ”¹çŠ¶æ€çš„é€»è¾‘å¯èƒ½å¾ˆå¤æ‚
* è¯¥åº”ç”¨ç¨‹åºå…·æœ‰ä¸­å‹æˆ–å¤§å‹ä»£ç åº“,å¹¶ä¸”å¯èƒ½ç”±è®¸å¤šäººå¼€å‘

*å¹¶éæ‰€æœ‰åº”ç”¨ç¨‹åºéƒ½éœ€è¦Redux.èŠ±ä¸€äº›æ—¶é—´è€ƒè™‘æ‚¨æ­£åœ¨æ„å»ºçš„åº”ç”¨ç¨‹åºç±»å‹,å¹¶å†³å®šå“ªäº›å·¥å…·æœ€èƒ½å¸®åŠ©è§£å†³æ‚¨æ­£åœ¨å¤„ç†çš„é—®é¢˜.*

> ### æƒ³çŸ¥é“æ›´å¤š?
> 
> å¦‚æœæ‚¨è¿˜ä¸ç¡®å®šReduxæ˜¯å¦é€‚åˆæ‚¨çš„åº”ç”¨ç¨‹åº,è¿™äº›èµ„æºä¼šæä¾›æ›´å¤šçŸ¥é“:
>
> * [ä½•æ—¶(ä½•æ—¶ä¸)ä½¿ç”¨Redux](https://changelog.com/posts/when-and-when-not-to-reach-for-redux)
> * [Reduxä¹‹é“,ç¬¬1éƒ¨åˆ†-å®ç°å’Œæ„å›¾](https://blog.isquaredsoftware.com/2017/05/idiomatic-redux-tao-of-redux-part-1/)
> * [Reduxå¸¸è§é—®é¢˜è§£ç­”:æˆ‘åº”è¯¥ä»€ä¹ˆæ—¶å€™ä½¿ç”¨Redux?](https://redux.js.org/faq/general#when-should-i-use-redux)
> * [æ‚¨å¯èƒ½ä¸éœ€è¦Redux](https://medium.com/@dan_abramov/you-might-not-need-redux-be46360cf367)
>

## Reduxåº“å’Œå·¥å…·

Reduxæ˜¯ä¸€ä¸ªå°å‹çš„ç‹¬ç«‹JSåº“.ä½†æ˜¯,å®ƒé€šå¸¸ä¸å…¶ä»–å‡ ä¸ªåŒ…ä¸€èµ·ä½¿ç”¨:

### React

Redux å¯ä»¥ä¸ä»»ä½• UI æ¡†æ¶é›†æˆï¼Œå¹¶ä¸”æœ€å¸¸ä¸ React ä¸€èµ·ä½¿ç”¨ã€‚React-Reduxæ˜¯æˆ‘ä»¬çš„å®˜æ–¹åŒ…ï¼Œå®ƒå…è®¸æ‚¨çš„ React ç»„ä»¶é€šè¿‡è¯»å–çŠ¶æ€ç‰‡æ®µå’Œè°ƒåº¦æ“ä½œæ¥æ›´æ–°å­˜å‚¨æ¥ä¸ Redux å­˜å‚¨è¿›è¡Œäº¤äº’ã€‚

### Redux

Redux Toolkitæ˜¯æˆ‘ä»¬æ¨èçš„ç¼–å†™ Redux é€»è¾‘çš„æ–¹æ³•ã€‚å®ƒåŒ…å«æˆ‘ä»¬è®¤ä¸ºå¯¹äºæ„å»º Redux åº”ç”¨ç¨‹åºè‡³å…³é‡è¦çš„åŒ…å’ŒåŠŸèƒ½ã€‚[Redux Toolkit](https://react-redux.js.org/) æ„å»ºåœ¨æˆ‘ä»¬å»ºè®®çš„æœ€ä½³å®è·µä¸­ï¼Œç®€åŒ–äº†å¤§å¤šæ•° Redux ä»»åŠ¡ï¼Œé˜²æ­¢å¸¸è§é”™è¯¯ï¼Œå¹¶ä½¿ç¼–å†™ Redux åº”ç”¨ç¨‹åºæ›´å®¹æ˜“ã€‚

### Redux DevTools

[Redux DevTools Extension](https://github.com/zalmoxisus/redux-devtools-extension)æ˜¾ç¤ºäº† Redux å­˜å‚¨ä¸­çŠ¶æ€éšæ—¶é—´å˜åŒ–çš„å†å²è®°å½•ã€‚è¿™ä½¿æ‚¨å¯ä»¥æœ‰æ•ˆåœ°è°ƒè¯•æ‚¨çš„åº”ç”¨ç¨‹åºï¼ŒåŒ…æ‹¬ä½¿ç”¨å¼ºå¤§çš„æŠ€æœ¯ï¼Œå¦‚â€œæ—¶é—´æ—…è¡Œè°ƒè¯•â€ã€‚

# Redux

æ—¢ç„¶æ‚¨çŸ¥é“Reduxæ˜¯ä»€ä¹ˆ,è®©æˆ‘ä»¬ç®€è¦åœ°çœ‹ä¸€ä¸‹ç»„æˆReduxåº”ç”¨ç¨‹åºçš„éƒ¨åˆ†ä»¥åŠå®ƒæ˜¯å¦‚ä½•å·¥ä½œçš„.

>
> ### ä¿¡æ¯
>
> æœ¬é¡µçš„å…¶ä½™æè¿°ä»…å…³æ³¨Reduxæ ¸å¿ƒåº“(redux åŒ…).åœ¨å®Œæˆæœ¬æ•™æçš„å…¶ä½™éƒ¨åˆ†æ—¶,æˆ‘ä»¬å°†è®¨è®ºå…¶ä»–ä¸Reduxç›¸å…³çš„åŒ….
>

## Redux

æ¯ä¸ªReduxåº”ç”¨ç¨‹åºçš„ä¸­å¿ƒæ˜¯*store*. â€œå­˜å‚¨â€æ˜¯ä¿å­˜åº”ç”¨ç¨‹åºå…¨å±€çŠ¶æ€çš„å®¹å™¨.

storeæ˜¯ä¸€ä¸ªJavaScriptå¯¹è±¡,å…·æœ‰ä¸€äº›ç‰¹æ®Šçš„åŠŸèƒ½å’Œèƒ½åŠ›,ä½¿å…¶ä¸åŒäºæ™®é€šçš„å…¨å±€å¯¹è±¡:

* ä½ ç»ä¸èƒ½ç›´æ¥ä¿®æ”¹æˆ–æ›´æ”¹ä¿å­˜åœ¨Reduxå­˜å‚¨ä¸­çš„çŠ¶æ€
* ç›¸å,å¯¼è‡´çŠ¶æ€æ›´æ–°çš„å”¯ä¸€æ–¹æ³•æ˜¯åˆ›å»ºä¸€ä¸ªæè¿°â€œåº”ç”¨ç¨‹åºä¸­å‘ç”Ÿçš„äº‹æƒ…â€çš„æ™®é€šæ“ä½œå¯¹è±¡,ç„¶åå°†æ“ä½œåˆ†æ´¾åˆ°å­˜å‚¨ä»¥å‘Šè¯‰å®ƒå‘ç”Ÿäº†ä»€ä¹ˆ.
* å½“ä¸€ä¸ªActionè¢«è°ƒç”¨æ—¶,storeè¿è¡Œroot reducerå‡½æ•°,å¹¶è®©å®ƒæ ¹æ®æ—§çŠ¶æ€å’Œactionè®¡ç®—æ–°çŠ¶æ€
* æœ€å, storeé€šçŸ¥è®¢é˜…è€…çŠ¶æ€å·²æ›´æ–°,ä»¥ä¾¿UIå¯ä»¥ä½¿ç”¨æ–°æ•°æ®è¿›è¡Œæ›´æ–°.

# Redux æ ¸å¿ƒç¤ºä¾‹

è®©æˆ‘ä»¬çœ‹ä¸€ä¸ªReduxåº”ç”¨ç¨‹åºçš„æœ€å°å·¥ä½œç¤ºä¾‹

### ä¸€ä¸ªå°å‹è®¡ç®—å™¨çš„åº”ç”¨ç¨‹åº:

```javascript
<!DOCTYPE html>
<html>
    <head>
        <title>Redux basic example</title>
        <script src="https://unpkg.com/redux@latest/dist/redux.min.js"></script>
    </head>
    <body>
        <div>
            <p>
                Clicked: <span id="value">0</span> items
                <button id="increment"> + </button>
                <button id="decrement"> - </button>
                <button id="incrementIfOdd"> æ¯æ¬¡æ·»åŠ å¥‡æ•° </button>
                <button id="incrementAsync"> å¼‚æ­¥æ·»åŠ  </button>
            </p>
        </div>
        <script>
            // å®šä¹‰åº”ç”¨çš„åˆå§‹çŠ¶æ€å€¼
            const initialState = { value: 0 }

            // åˆ›å»ºä¸€ä¸ª â€œreducerâ€ å‡½æ•°æ¥å†³å®šæ–°çš„çŠ¶æ€å€¼
            // åº”è¯¥æ˜¯åº”ç”¨ç¨‹åºå‘ç”Ÿä¸€äº›ä»€ä¹ˆæ—¶
            function counterReducer(state = initialState, action) {
                // â€œreducerâ€é€šå¸¸ä¼šæŸ¥çœ‹å‘ç”Ÿçš„ "action" ç±»å‹
                // å†³å®šå¦‚ä½•æ›´æ–°çŠ¶æ€å€¼
                switch (action.type) {
                    case: "counter/incremented":
                        return { ...state, value: state.value + 1 };
                    case: "counter/decremented":
                        return { ...state, value: state.value - 1 };
                    default:
                        // å¦‚æœ â€œreducerâ€ ä¸å…³å¿ƒè¿™ä¸ª â€œactionâ€ç±»å‹,
                        // åŸæ ·è¿”å›ç°æœ‰çŠ¶æ€
                        return state;
                }
            }

            // ä½¿ç”¨ â€œcreateStoreâ€å‡½æ•°åˆ›å»ºä¸€ä¸ªæ–°çš„Redux store
            // å¹¶ä¸” ä½¿ç”¨ â€œcounterReducerâ€ æ¥è¿›è¡Œé€»è¾‘æ›´æ–°
            const store = Redux.createStore(counterReducer);

            const valueEl = document.querySelector('#value');

            // æ¯å½“storeçŠ¶æ€å‘ç”Ÿå˜åŒ–æ—¶,é€šè¿‡ä»¥ä¸‹æ–¹å¼æ›´æ–°UI
            // è¯»å–æœ€æ–°çš„å­˜å‚¨çŠ¶æ€å¹¶æ˜¾ç¤ºæ–°æ•°æ®
            function render() {
                const state = store.getState();
                valueEl.innerHTML = state.value.toString();
            }

            // ä½¿ç”¨åˆå§‹åŒ–çŠ¶æ€æ›´æ–°UI
            render();

            // è®¢é˜…, å°†æ¥çŠ¶æ€å‘ç”Ÿå˜åŒ–æ—¶é‡ç»˜
            store.subscribe(render);

            // é€šè¿‡â€œåˆ†æ´¾â€æ“ä½œå¯¹è±¡å¤„ç†ç”¨æˆ·è¾“å…¥,
            // æè¿°åº”ç”¨ç¨‹åºä¸­å‘ç”Ÿäº†ä»€ä¹ˆ
            document.querySelector('#increment')
                .addEventListener('click', function() {
                    store.dispatch({ type: 'counter/incremented' });
                });

            document.querySelector('#decrement')
                .addEventListener('click', function() {
                    store.dispatch({ type: 'counter/decremented'})
                });

            document.querySelector('#incrementIfOdd')
                .addEventListener('click', function() {
                    // æˆ‘ä»¬å¯ä»¥æ ¹æ®çŠ¶æ€æ¥ç¼–å†™é€»è¾‘
                    if(store.getState().value % 2 !== 0) {
                        store.dispatch({ type: 'counter/incremented' })
                    }
                });

            document.querySelector('#incrementAsync')
                .addEventListener('click', function() {
                    // æˆ‘ä»¬ä¹Ÿå¯ä»¥ç¼–å†™ä¸storeäº¤äº’çš„å¼‚æ­¥é€»è¾‘
                    setTimeout(function() {
                        store.dispatch({ type: 'counter/incremented' });
                    }, 1000)
                });

        </script>
    </body>
</html>
```

å› ä¸ºReduxæ˜¯ä¸€ä¸ªç‹¬ç«‹çš„JSåº“, æ²¡æœ‰ä¾èµ–å…³ç³»,æ‰€ä»¥è¿™ä¸ªä¾‹å­æ˜¯é€šè¿‡åªä¸ºReduxåº“åŠ è½½å•ä¸ªè„šæœ¬æ ‡ç­¾æ¥ç¼–å†™çš„, å¹¶ä¸”ä½¿ç”¨åŸºæœ¬çš„JSå’ŒHTMLæ¥ç¼–å†™UI.åœ¨å®è·µä¸­,é€šå¸¸é€šè¿‡ä»`NPM å®‰è£…Redux`åŒ…æ¥ä½¿ç”¨Redux,å¹¶ä¸”ä½¿ç”¨åƒ[React](https://reactjs.org/)è¿™æ ·çš„åº“æ¥åˆ›å»ºUI.

> ## ä¿¡æ¯
>
> ç¬¬5éƒ¨åˆ†: UIå’ŒReactå±•ç¤ºäº†å¦‚ä½•ä¸€èµ·ä½¿ç”¨Reduxå’ŒReact.
>
è®©æˆ‘ä»¬æŠŠè¿™ä¸ªä¾‹å­åˆ†è§£æˆä¸åŒçš„éƒ¨åˆ†,çœ‹çœ‹å‘ç”Ÿäº†ä»€ä¹ˆ.

State, Actions, å’Œ Reducers

æˆ‘ä»¬é¦–å…ˆå®šä¹‰ä¸€ä¸ªåˆå§‹çŠ¶æ€å€¼æ¥æè¿°åº”ç”¨ç¨‹åº:

```javascript
// å®šä¹‰åº”ç”¨ç¨‹åºçš„åˆå§‹çŠ¶æ€å€¼
const initialState = {
    value: 0
}
```

å¯¹äºè¿™ä¸ªåº”ç”¨ç¨‹åº,æˆ‘ä»¬å°†ä½¿ç”¨è®¡æ•°å™¨çš„å½“å‰å€¼è·Ÿè¸ªä¸€ä¸ªæ•°å­—.

Redux åº”ç”¨ç¨‹åºé€šå¸¸æœ‰ä¸€ä¸ªJSå¯¹è±¡ä½œä¸ºçŠ¶æ€çš„æ ¹éƒ¨åˆ†,è¯¥å¯¹è±¡å†…éƒ¨è¿˜æœ‰å…¶ä»–å€¼.

ç„¶å, æˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ª**reducer**å‡½æ•°.reduceræ¥æ”¶ä¸¤ä¸ªå‚æ•°,å½“å‰å‚æ•°`state`å’Œ`action`.å½“reduxåº”ç”¨ç¨‹åºå¯åŠ¨æ—¶,æˆ‘ä»¬è¿˜æ²¡æœ‰ä»»åŠ¡çŠ¶æ€,æ‰€ä»¥æˆ‘ä»¬æä¾›äº†initialStateè¿™ä¸ªreducerçš„é»˜è®¤å€¼:

```javascript
// åˆ›å»ºä¸€ä¸ª â€œreducerâ€ å‡½æ•°æ¥å†³å®šæ–°çš„çŠ¶æ€å€¼
// åº”è¯¥æ˜¯åº”ç”¨ç¨‹åºå‘ç”Ÿä¸€äº›ä»€ä¹ˆæ—¶
function counterReducer(state = initialState, action) {
    // â€œreducerâ€é€šå¸¸ä¼šæŸ¥çœ‹å‘ç”Ÿçš„ "action" ç±»å‹
    // å†³å®šå¦‚ä½•æ›´æ–°çŠ¶æ€å€¼
    switch (action.type) {
        case: "counter/incremented":
            return { ...state, value: state.value + 1 };
        case: "counter/decremented":
            return { ...state, value: state.value - 1 };
        default:
            // å¦‚æœ â€œreducerâ€ ä¸å…³å¿ƒè¿™ä¸ª â€œactionâ€ç±»å‹,
            // åŸæ ·è¿”å›ç°æœ‰çŠ¶æ€
            return state;
    }
}
```
actionå¯¹è±¡æ€»æ˜¯æœ‰ä¸€ä¸ª`type`å­—æ®µ,å®ƒæ˜¯æ‚¨æä¾›çš„ä¸€ä¸ªå­—ç¬¦ä¸²,ç”¨ä½œåŠ¨ä½œçš„å”¯ä¸€åç§°.åº”è¯¥æ˜¯ä¸€ä¸ªå¯è¯»çš„`type`åç§°,ä»¥ä¾¿æŸ¥çœ‹æ­¤ä»£ç çš„ä»»ä½•äººéƒ½äº†è§£å®ƒçš„å«ä¹‰.åœ¨è¿™ç§æƒ…å†µä¸‹,æˆ‘ä»¬ä½¿ç”¨å•è¯â€œcounterâ€ä½œä¸ºæˆ‘ä»¬action typeçš„å‰åŠéƒ¨åˆ†,ååŠéƒ¨åˆ†æ˜¯å¯¹â€œå‘ç”Ÿäº†ä»€ä¹ˆçš„æè¿°â€.åœ¨è¿™ç§æƒ…å†µä¸‹,æˆ‘ä»¬çš„â€œè®¡ç®—å™¨â€æ˜¯â€œé€’å¢çš„â€,æ‰€ä»¥æˆ‘ä»¬å°†action typeå†™ä¸º`'counter/incremented'`.


æ ¹æ®action type,æˆ‘ä»¬è¦ä¹ˆéœ€è¦è¿”å›ä¸€ä¸ªå…¨æ–°çš„å¯¹è±¡ä½œä¸ºæ–°çš„`state`ç»“æœ,è¦ä¹ˆè¿”å›ç°æœ‰çš„`state`å¯¹è±¡, å½“ç„¶è¿™å‘ç”Ÿåœ¨type åŒ¹é…ä¸ä¸Š,æ²¡æœ‰ä»»ä½•å˜åŒ–æ—¶.
è¯·æ³¨æ„,æˆ‘ä»¬é€šè¿‡å¤åˆ¶ç°æœ‰çŠ¶æ€å¹¶æ›´æ–°å‰¯æœ¬æ¥ä¸å¯å˜åœ°æ›´æ–°çŠ¶æ€,è€Œä¸æ˜¯ç›´æ¥ä¿®æ”¹åŸå§‹å¯¹è±¡.

## Store

ç°åœ¨æˆ‘ä»¬æœ‰äº†ä¸€ä¸ªreducerå‡½æ•°,æˆ‘ä»¬å¯ä»¥é€šè¿‡è°ƒç”¨Reduxåº“APIåˆ›å»ºä¸€ä¸ªstoreå®ä¾‹.`createStore`
```javascript
// ä½¿ç”¨ â€œcreateStoreâ€å‡½æ•°åˆ›å»ºä¸€ä¸ªæ–°çš„Redux store
// å¹¶ä¸” ä½¿ç”¨ â€œcounterReducerâ€ æ¥è¿›è¡Œé€»è¾‘æ›´æ–°
const store = Redux.createStore(counterReducer);
```
æˆ‘ä»¬å°†reducerå‡½æ•°ä¼ é€’ç»™createStore,å®ƒä½¿ç”¨reducerå‡½æ•°ç”Ÿæˆåˆå§‹çŠ¶æ€,å¹¶è®¡ç®—ä»»ä½•æœªæ¥çš„æ›´æ–°.

## UI

åœ¨ä»»ä½•åº”ç”¨ç¨‹åºä¸­,ç”¨æˆ·ç•Œé¢éƒ½ä¼šåœ¨å±å¹•ä¸Šæ˜¾ç¤ºç°æœ‰çŠ¶æ€,å½“ç”¨æˆ·æ‰§è¡ŒæŸé¡¹æ“ä½œæ—¶,åº”ç”¨ç¨‹åºå°†æ›´æ–°å…¶æ•°æ®,ç„¶åä½¿ç”¨è¿™äº›å€¼é‡æ–°ç»˜åˆ¶UI.
```javascript
const valueEl = document.querySelector('#value');

// æ¯å½“storeçŠ¶æ€å‘ç”Ÿå˜åŒ–æ—¶,é€šè¿‡ä»¥ä¸‹æ–¹å¼æ›´æ–°UI
// è¯»å–æœ€æ–°çš„å­˜å‚¨çŠ¶æ€å¹¶æ˜¾ç¤ºæ–°æ•°æ®
function render() {
    const state = store.getState();
    valueEl.innerHTML = state.value.toString();
}

// ä½¿ç”¨åˆå§‹åŒ–çŠ¶æ€æ›´æ–°UI
render();

// è®¢é˜…, å°†æ¥çŠ¶æ€å‘ç”Ÿå˜åŒ–æ—¶é‡ç»˜
store.subscribe(render);
```
åœ¨è¿™ä¸ªå°ä¾‹å­ä¸­,æˆ‘ä»¬åªä½¿ç”¨äº†ä¸€äº›åŸºæœ¬çš„HTMLå…ƒç´ ä½œä¸ºæˆ‘ä»¬çš„UI,å…¶ä¸­ä¸€ä¸ª`<div>`æ˜¾ç¤ºå½“å‰å€¼.

å› æ­¤,æˆ‘ä»¬ç¼–å†™äº†ä¸€ä¸ªå‡½æ•°,è¯¥å‡½æ•°çŸ¥é“å¦‚ä½•ä½¿ç”¨è¯¥`store.getState()`æ–¹æ³•ä»Reduxå­˜å‚¨ä¸­è·å–æœ€æ–°çŠ¶æ€,ç„¶åè·å–è¯¥å€¼å¹¶æ›´æ–°UIä»¥æ˜¾ç¤ºå®ƒ.

Redux storeå…è®¸æˆ‘ä»¬è°ƒç”¨`store.subscribe()`å¹¶ä¼ é€’è®¢é˜…è€…å›è°ƒå‡½æ•°,è¯¥å‡½æ•°å°†åœ¨æ¯æ¬¡æ›´æ–°storeæ—¶è°ƒç”¨. å› æ­¤, æˆ‘ä»¬å¯ä»¥å°†æˆ‘ä»¬renderå‡½æ•°ä½œä¸ºè®¢é˜…è€…å›è°ƒä¼ é€’,å¹¶ä¸”çŸ¥é“æ¯æ¬¡storeæ›´æ–°æ—¶,æˆ‘ä»¬éƒ½å¯ä»¥å°†UIæ›´æ–°ä¸ºæœ€æ–°çš„å€¼.

Redux æœ¬èº«æ˜¯ä¸€ä¸ªå¯ä»¥åœ¨ä»»ä½•åœ°æ–¹ä½¿ç”¨çš„ç‹¬ç«‹åº“.è¿™ä¹Ÿæ„å‘³ç€å®ƒå¯ä»¥ä¸ä»»ä½•UIå±‚ä¸€èµ·ä½¿ç”¨.

## Dispatching Actions

æœ€å, æˆ‘ä»¬éœ€è¦é€šè¿‡åˆ›å»ºæè¿°æ‰€å‘ç”Ÿäº‹ä»¶çš„æ“ä½œå¯¹è±¡å¹¶å°†ä»–ä»¬åˆ†æ´¾åˆ°storeæ¥å“åº”ç”¨æˆ·è¾“å…¥.å½“æˆ‘ä»¬è°ƒç”¨`store.dispatch(action)`æ—¶,store è¿è¡Œreducer,è®¡ç®—æ›´æ–°çŠ¶æ€,å¹¶è¿è¡Œè®¢é˜…è€…æ›´æ–°UI.
```javascript
 // é€šè¿‡â€œåˆ†æ´¾â€æ“ä½œå¯¹è±¡å¤„ç†ç”¨æˆ·è¾“å…¥,
// æè¿°åº”ç”¨ç¨‹åºä¸­å‘ç”Ÿäº†ä»€ä¹ˆ
document.querySelector('#increment')
    .addEventListener('click', function() {
        store.dispatch({ type: 'counter/incremented' });
    });

document.querySelector('#decrement')
    .addEventListener('click', function() {
        store.dispatch({ type: 'counter/decremented'})
    });

document.querySelector('#incrementIfOdd')
    .addEventListener('click', function() {
        // æˆ‘ä»¬å¯ä»¥æ ¹æ®çŠ¶æ€æ¥ç¼–å†™é€»è¾‘
        if(store.getState().value % 2 !== 0) {
            store.dispatch({ type: 'counter/incremented' })
        }
    });

document.querySelector('#incrementAsync')
    .addEventListener('click', function() {
        // æˆ‘ä»¬ä¹Ÿå¯ä»¥ç¼–å†™ä¸storeäº¤äº’çš„å¼‚æ­¥é€»è¾‘
        setTimeout(function() {
            store.dispatch({ type: 'counter/incremented' });
        }, 1000)
    });
```
åœ¨è¿™é‡Œ, æˆ‘ä»¬å°†è°ƒåº¦ä½¿reducerä»å½“å‰è®¡æ•°å™¨å€¼åŠ 1æˆ–å‡1çš„æ“ä½œ.

æˆ‘ä»¬è¿˜å¯ä»¥ç¼–å†™ä»…åœ¨æŸä¸ªæ¡ä»¶ä¸ºçœŸæ—¶æ‰è°ƒåº¦actionçš„ä»£ç ,æˆ–è€…ç¼–å†™ä¸€äº›å»¶è¿Ÿåè°ƒåº¦åŠ¨ä½œçš„å¼‚æ­¥ä»£ç .

## Data Flow

æˆ‘ä»¬å¯ä»¥é€šè¿‡ç”¨è¿™å¼ å›¾æ€»ç»“Reduxåº”ç”¨ç¨‹åºçš„æ•°æ®æµ.å®ƒä»£è¡¨å¦‚ä½•:

* action æ˜¯ å“åº”ç”¨æˆ·äº¤äº’(å¦‚ç‚¹å‡»)è€Œè°ƒåº¦çš„
* storeè¿è¡Œreducerå‡½æ•°æ¥è®¡ç®—æ–°çŠ¶æ€
* UI è¯»å–æœ€æ–°çŠ¶æ€å±•ç°æ–°å€¼

(å¦‚æœè¿™äº›éƒ¨åˆ†è¿˜ä¸æ˜¯å¾ˆæ¸…æ¥š,è¯·ä¸è¦æ‹…å¿ƒ!åœ¨é˜…è¯»æœ¬æ•™ç¨‹çš„å…¶ä½™éƒ¨åˆ†æ—¶,è¯·è®°ä½è¿™å¼ å›¾ç‰‡,æ‚¨ä¼šçœ‹åˆ°è¿™äº›éƒ¨åˆ†æ˜¯å¦‚ä½•ç»„åˆåœ¨ä¸€èµ·çš„.)

![Redux æ•°æ®æµå›¾](https://redux.js.org/assets/images/ReduxDataFlowDiagram-49fa8c3968371d9ef6f2a1486bd40a26.gif)

# ä½ å­¦åˆ°äº†ä»€ä¹ˆ

é‚£ä¸ªcounter ä¾‹å­ğŸŒ° æ˜¯å¾ˆå°çš„, ä½†å®ƒç¡®å®å±•ç¤ºäº†ä¸€ä¸ªçœŸæ­£çš„Reduxåº”ç”¨ç¨‹åºçš„æ‰€æœ‰å·¥ä½œéƒ¨åˆ†,**æˆ‘ä»¬å°†åœ¨ä»¥ä¸‹éƒ¨åˆ†ä¸­è®¨è®ºçš„æ‰€æœ‰å†…å®¹éƒ½æ‰©å±•äº†è¿™äº›åŸºç¡€éƒ¨åˆ†**

è€ƒè™‘åˆ°è¿™ä¸€ç‚¹,è®©æˆ‘ä»¬å›é¡¾ä¸€ä¸‹åˆ°ç›®å‰ä¸ºæ­¢æˆ‘ä»¬å­¦åˆ°äº†ä»€ä¹ˆ:
> ### æ¦‚æ‹¬
>- **Reduxæ˜¯ä¸€ä¸ªç”¨äºç®¡ç†å…¨å±€åº”ç”¨ç¨‹åºçŠ¶æ€çš„åº“**
>   - Reduxé€šå¸¸ä¸React-reduxåº“ä¸€èµ·ä½¿ç”¨,ç”¨æˆ·å°†Reduxå’ŒReacté›†æˆåœ¨ä¸€èµ·
>   - Redux Toolkit æ˜¯ç¼–å†™Reduxé€»è¾‘çš„æ¨èæ–¹å¼
>- **Reduxä½¿ç”¨äº†å‡ ç§ç±»å‹çš„ä»£ç **
>   - actionæ˜¯å¸¦æœ‰`type`å­—æ®µçš„æ™®é€šå¯¹è±¡,å¹¶åœ¨åº”ç”¨ç¨‹åºä¸­æè¿°â€œå‘ç”Ÿäº†ä»€ä¹ˆâ€
>   - Reducersæ˜¯æ ¹æ®å…ˆå‰çŠ¶æ€+actionè®¡ç®—æ–°çŠ¶æ€å€¼çš„å‡½æ•°
>   - æ¯å½“åˆ†æ´¾æ“ä½œæ—¶,Reduxå­˜å‚¨éƒ½ä¼šè¿è¡Œ root reducer